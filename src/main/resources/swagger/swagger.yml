openapi: 3.0.1
info:
  title: Interview Practice API Docs
  version: "1.0.1"
  description: Custom API documentation for Ecommerce Platform including payments, wallet, refunds, invoices, Redis & Kafka flows

paths:

  # =======================
  # AUTH CONTROLLER
  # =======================
  /auth/login:
    post:
      tags: [auth-controller]
      summary: User Login
      description: Authenticate user & return JWT token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AuthRequest"
            example:
              email: "john@gmail.com"
              password: "password123"
      responses:
        "200":
          description: Login successful
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuthResponse"

  /auth/register:
    post:
      tags: [auth-controller]
      summary: Register a new user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RegisterRequest"
            example:
              name: "John Doe"
              email: "john@gmail.com"
              password: "password123"
              role: "USER_ROLE"
      responses:
        "201":
          description: User registered successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RegisterResponse"

  # =======================
  # PRODUCT CONTROLLER
  # =======================
  /api/allProducts:
    get:
      tags: [product-controller]
      summary: Get All Products
      responses:
        "200":
          description: List fetched successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/ProductResponse"

  /api/createProducts:
    post:
      tags: [product-controller]
      summary: Add Product
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ProductRequest"
            example:
              name: "Laptop"
              description: "High performance laptop"
              price: 49999.99
              quantity: 10
      responses:
        "201":
          description: Product created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ProductResponse"

  # =======================
  # USER CONTROLLER
  # =======================
  /api/allUsers:
    get:
      tags: [user-controller]
      summary: Get All Users
      responses:
        "200":
          description: List fetched successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/UserResponse"

  /api/createUsers:
    post:
      tags: [user-controller]
      summary: Create User
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserRequest"
            example:
              name: "John Doe"
              email: "john.doe@example.com"
              password: "password@123"
              role: "USER_ROLE"
      responses:
        "201":
          description: User created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserResponse"

  # =======================
  # ORDER CONTROLLER
  # =======================
  /api/orders/addOrder:
    post:
      tags: [order-controller]
      summary: Create Order
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/OrderRequest"
            example:
              userId: 1
              status: "CREATED"
              paymentMethod: "CARD"
              items:
                - productId: 10
                  quantity: 2
                - productId: 15
                  quantity: 1
      responses:
        "201":
          description: Order created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrderResponse"

  /api/orders/{orderId}:
    get:
      tags: [order-controller]
      summary: Get Order By ID
      parameters:
        - in: path
          name: orderId
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: Order fetched successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrderResponse"

  /api/orders/user/{userId}:
    get:
      tags: [order-controller]
      summary: Get Orders By User ID
      parameters:
        - in: path
          name: userId
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: Orders fetched successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/OrderResponse"

  /api/orders/{orderId}/status:
    put:
      tags: [order-controller]
      summary: Update Order Status
      parameters:
        - in: path
          name: orderId
          required: true
          schema:
            type: integer
      requestBody:
        required: true
        content:
          application/json:
            example:
              status: "SHIPPED"
      responses:
        "200":
          description: Order updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrderResponse"

  /api/orders/delete/{orderId}:
    delete:
      tags: [ order-controller ]
      summary: Delete Order By ID
      parameters:
        - in: path
          name: orderId
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: Order Deleted successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/OrderResponse"

  # =======================
  # PAYMENT CONTROLLER
  # =======================
  /api/payments/createPayment:
    post:
      tags: [payment-controller]
      summary: Create Dummy Payment
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/PaymentRequest"
            example:
              orderId: 1
              amount: 1500
              method: "CARD"
      responses:
        "201":
          description: Payment created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/PaymentResponse"

  # =======================
  # REFUND CONTROLLER
  # =======================
  /api/requestRefund:
    post:
      tags: [refund-controller]
      summary: Create Refund
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/RefundRequest"
            example:
              paymentId: 10
              reason: "Order Cancelled"
      responses:
        "200":
          description: Refund processed successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RefundResponse"

  # =======================
  # WALLET CONTROLLER
  # =======================
  /api/wallet/{userId}/credit:
    post:
      tags: [wallet-controller]
      summary: Credit Wallet
      parameters:
        - in: path
          name: userId
          required: true
          schema:
            type: integer
        - in: query
          name: amount
          required: true
          schema:
            type: number
      responses:
        "200":
          description: Wallet credited
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WalletResponse"

  /api/wallet/{userId}/debit:
    post:
      tags: [wallet-controller]
      summary: Debit Wallet
      parameters:
        - in: path
          name: userId
          required: true
          schema:
            type: integer
        - in: query
          name: amount
          required: true
          schema:
            type: number
      responses:
        "200":
          description: Wallet debited
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/WalletResponse"

  # =======================
  # INVOICE CONTROLLER
  # =======================
  /api/invoice/{orderId}:
    get:
      tags: [invoice-controller]
      summary: Generate invoice for an order
      parameters:
        - in: path
          name: orderId
          required: true
          schema:
            type: integer
      responses:
        "200":
          description: Invoice generated
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/InvoiceResponse"

  # =======================
  # REDIS CONTROLLER
  # =======================
  /redis/save:
    post:
      tags: [redis-controller]
      summary: Save data in Redis
      requestBody:
        required: true
        content:
          application/json:
            example:
              key: "user:101"
              value: "John Doe"
      responses:
        "200":
          description: Value saved

  /redis/{key}:
    get:
      tags: [redis-controller]
      summary: Get value from Redis
      parameters:
        - in: path
          name: key
          required: true
          schema:
            type: string
      responses:
        "200":
          description: Fetched Redis value

  # =======================
  # KAFKA CONTROLLER
  # =======================
  /kafka/publish:
    post:
      tags: [kafka-controller]
      summary: Publish a message to Kafka
      requestBody:
        required: true
        content:
          application/json:
            example:
              message: "Order created notification"
      responses:
        "200":
          description: Published successfully

components:
  schemas:

    AuthRequest:
      type: object
      properties:
        email: {type: string}
        password: {type: string}

    AuthResponse:
      type: object
      properties:
        token: {type: string}
        role: {type: string}
        message: {type: string}

    RegisterRequest:
      type: object
      properties:
        name: {type: string}
        email: {type: string}
        password: {type: string}
        role: {type: string}

    RegisterResponse:
      type: object
      properties:
        id: {type: integer}
        name: {type: string}
        email: {type: string}
        role: {type: string}
        message: {type: string}

    ProductRequest:
      type: object
      required: [name, price, description, quantity]
      properties:
        id: {type: integer}
        name: {type: string}
        description: {type: string}
        price: {type: number}
        quantity: {type: integer}

    ProductResponse:
      type: object
      properties:
        id: {type: integer}
        name: {type: string}
        description: {type: string}
        price: {type: number}
        quantity: {type: integer}
        status: {type: integer}
        message: {type: string}

    UserRequest:
      type: object
      required: [name, email, role]
      properties:
        id: {type: integer}
        name: {type: string}
        email: {type: string}
        password: {type: string}
        role: {type: string}

    UserResponse:
      type: object
      properties:
        id: {type: integer}
        name: {type: string}
        email: {type: string}
        role: {type: string}
        status: {type: integer}
        message: {type: string}

    OrderRequest:
      type: object
      required: [userId, status, items]
      properties:
        userId: {type: integer}
        status: {type: string}
        paymentMethod: {type: string}
        items:
          type: array
          items:
            type: object
            properties:
              productId: {type: integer}
              quantity: {type: integer}

    OrderResponse:
      type: object
      properties:
        id: {type: integer}
        userId: {type: integer}
        totalAmount: {type: number}
        status: {type: string}
        message: {type: string}

    PaymentRequest:
      type: object
      required: [orderId, amount, method]
      properties:
        orderId: {type: integer}
        amount: {type: number}
        method: {type: string}

    PaymentResponse:
      type: object
      properties:
        paymentId: {type: integer}
        orderId: {type: integer}
        amount: {type: number}
        status: {type: string}
        method: {type: string}
        createdAt: {type: string}

    RefundRequest:
      type: object
      required: [paymentId, reason]
      properties:
        paymentId: {type: integer}
        reason: {type: string}

    RefundResponse:
      type: object
      properties:
        refundId: {type: integer}
        paymentId: {type: integer}
        status: {type: string}
        refundedAt: {type: string}

    InvoiceResponse:
      type: object
      properties:
        orderId: {type: integer}
        totalAmount: {type: number}
        generatedAt: {type: string}
        downloadUrl: {type: string}

    WalletResponse:
      type: object
      properties:
        userId: {type: integer}
        balance: {type: number}
        status: {type: string}
        message: {type: string}
